{"version":3,"sources":["../lib/rapi-lapi.js","logo-te-logo.png","../lib/bit-filament.js","App.js","serviceWorker.js","index.js","../lib/bit-chaos.js"],"names":["_toConsumableArray","__webpack_require__","_toArray","BitFilament","BitChaos","module","exports","_ref","lapi","socket","ecdh","_ref$getState","getState","_ref$setState","setState","Promise","ok","fail","cipher","filament","secret","binaryType","addEventListener","_ref2","data","_lapi","_payload","decrypt","_filament$untwist$shi2","untwist","shift","_filament$untwist$shi3","method","args","slice","apply","Uint8Array","_filament$untwist$shi","_key","key","api","computeSecret","_rapi","forEach","_len","arguments","length","Array","_key2","payload","twist","concat","send","encrypt","getPublicKey","Object","keys","from","p","Buffer","_slicedToArray","_defineProperty","_classCallCheck","_createClass","TextAPI","window","encode","text","TextEncoder","decode","TextDecoder","toString","GET_INFO","NUMBER","UINT_8","UINT_16","UINT_32","INT_8","INT_16","INT_32","FLOAT_32","FLOAT_64","FALSE","TRUE","STRING","REGEXP","OBJECT","ARRAY","BUFFER","customTypes","_this$types","_this","this","types","n","constructor","name","s","NumberInfo","Float64Array","test","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","r","buffer","unshift","info","offset","_UINT_8$UINT_16$UINT_","arrayBuffer","Float32Array","l","len","reduce","byte","ret","RegExp","replace","o","entries","value","obj","_this$untwist","_this$untwist2","offs","_this$untwist3","_this$untwist4","v","a","el","arr","_this$untwist5","_this$untwist6","push","b","arg","inspect","undefined","ArrayBuffer","infoByte","type","isClient","PATH","location","pathname","LS","id","console","log","JSON","stringify","localStorage","setItem","err","error","parse","server","init","_console","message","_console2","_len2","App","path","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","createECDH","bc","state","peerMessage","_this2","setupKeys","url","WebSocket","rapi","then","connected","e","warn","privateKey","setPrivateKey","generateKeys","getPrivateKey","_ref2$value","B64","_ref3$value","_ref3","_ref4$value","_ref4","_ref5$value","_ref5","navigator","_this3","_this$state","publicKey","react_default","createElement","className","src","logo","alt","placeholder","onChange","_ref6","_ref6$target","target","onPeerPublicChange","title","_ref7","_ref7$target","onPeerMessageChange","_ref8","_ref8$target","onMessageChange","onClick","_ref9","_ref9$target","copy","readOnly","_ref10","_ref10$target","href","Component","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister","origin","chunk","result","logic","add","ring","sub","xor","done","filter","mode","fns","slen","dlen","encrypted","sptr","dptr","seq","step","part","decrypted","steps","fn"],"mappings":"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","file":"static/js/main.186f2c63.chunk.js","sourcesContent":["var _toConsumableArray = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _toArray = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/toArray\");\n\nvar BitFilament = require('./bit-filament');\n\nvar BitChaos = require('./bit-chaos');\n\nmodule.exports = function rapi(_ref) {\n  var lapi = _ref.lapi,\n      socket = _ref.socket,\n      ecdh = _ref.ecdh,\n      _ref$getState = _ref.getState,\n      getState = _ref$getState === void 0 ? function () {} : _ref$getState,\n      _ref$setState = _ref.setState,\n      setState = _ref$setState === void 0 ? function () {} : _ref$setState;\n  return new Promise(function (ok, fail) {\n    var filament = new BitFilament();\n    var secret = '',\n        cipher;\n    socket.binaryType = 'arraybuffer';\n    socket.addEventListener('message', function (_ref2) {\n      var data = _ref2.data;\n\n      if (!secret) {\n        data = new Uint8Array(data);\n\n        var _filament$untwist$shi = filament.untwist(data).shift(),\n            _key = _filament$untwist$shi.key,\n            api = _filament$untwist$shi.api;\n\n        secret = ecdh.computeSecret(_key);\n        cipher = new BitChaos(secret);\n        var _rapi = {};\n        api.forEach(function (method) {\n          return _rapi[method] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            var payload = filament.twist([method].concat(args));\n            socket.send(cipher.encrypt(payload, 'bytearray'));\n          };\n        });\n        lapi = lapi(_rapi, getState, setState);\n        _rapi.key = _key;\n        ok(_rapi);\n      } else {\n        var _lapi;\n\n        var _payload = cipher.decrypt(data, 'bytearray');\n\n        var _filament$untwist$shi2 = filament.untwist(_payload).shift(),\n            _filament$untwist$shi3 = _toArray(_filament$untwist$shi2),\n            method = _filament$untwist$shi3[0],\n            args = _filament$untwist$shi3.slice(1);\n\n        if (typeof lapi[method] === 'function') (_lapi = lapi)[method].apply(_lapi, _toConsumableArray(args));\n      }\n    });\n    var key = ecdh.getPublicKey(); // console.log('>>>', {key})\n\n    var payload = filament.twist({\n      key: key,\n      api: Object.keys(lapi())\n    }); // console.log('>>>', {payload})\n\n    socket.send(Uint8Array.from(payload));\n  });\n};","module.exports = __webpack_public_path__ + \"static/media/logo-te-logo.aaa32282.png\";","var _slicedToArray = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _defineProperty = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/createClass\");\n\nvar isClient = typeof window !== 'undefined';\nvar TextAPI = isClient ? {\n  encode: function encode(text) {\n    return new TextEncoder().encode(text);\n  },\n  decode: function decode(data) {\n    return new TextDecoder().decode(Uint8Array.from(data));\n  }\n} : {\n  encode: function encode(text) {\n    return Buffer.from(text);\n  },\n  decode: function decode(data) {\n    return Buffer.from(data).toString('utf8');\n  }\n};\nvar GET_INFO = 0x0F; // 0000 1111\n\nvar GET_TYPE = 0xF0; // 1111 0000\n\nvar NUMBER = 0x10; // 00 01 0000\n\nvar UINT_8 = 0x00; // 0000 0000\n\nvar UINT_16 = 0x01; // 0000 0001\n\nvar UINT_32 = 0x02; // 0000 0010\n\nvar INT_8 = 0x03; // 0000 0011\n\nvar INT_16 = 0x04; // 0000 0100\n\nvar INT_32 = 0x05; // 0000 0101\n\nvar FLOAT_32 = 0x06; // 0000 0110\n\nvar FLOAT_64 = 0x07; // 0000 0111\n\nvar FALSE = 0x0E; // 0000 1110\n\nvar TRUE = 0x0F; // 0000 1111\n\nvar STRING = 0x20; // 0010 0000\n\nvar REGEXP = 0x30; // 0011 0000\n\nvar OBJECT = 0x40; // 0100 0000\n\nvar ARRAY = 0x50; // 0101 0000\n\nvar BUFFER = 0x60; // 0110 0000\n\nvar BitFilament =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function BitFilament(customTypes) {\n    var _this = this,\n        _this$types;\n\n    _classCallCheck(this, BitFilament);\n\n    this.types = (_this$types = {}, _defineProperty(_this$types, NUMBER, {\n      twist: function twist(n) {\n        if (n.constructor.name === 'Boolean') return [NUMBER | (n ? TRUE : FALSE)];\n        var s = n.toString(16);\n        var NumberInfo = [Float64Array, FLOAT_64];\n\n        if (!/\\./.test(s)) {\n          if (n < 0) {\n            /*    0111 0001 */\n            if (-0x81 < n) NumberInfo = [Int8Array, INT_8];else\n              /*    0111 0000 0000 0001 */\n              if (-0x8001 < n) NumberInfo = [Int16Array, INT_16];else\n                /*    0111 0000 0000 0001 */\n                if (-0x80000001 < n) NumberInfo = [Int32Array, INT_32];\n          } else {\n            if (n < 0x100) NumberInfo = [Uint8Array, UINT_8];else if (n < 0x10000) NumberInfo = [Uint16Array, UINT_16];else if (n < 0x100000000) NumberInfo = [Uint32Array, UINT_32];\n          }\n        }\n\n        var r = Array.from(new Uint8Array(NumberInfo[0].from([n]).buffer));\n        r.unshift(NUMBER | NumberInfo[1]);\n        return r;\n      },\n      untwist: function untwist(info, buffer, offset) {\n        var _UINT_8$UINT_16$UINT_;\n\n        return (_UINT_8$UINT_16$UINT_ = {}, _defineProperty(_UINT_8$UINT_16$UINT_, UINT_8, function (buffer, offset) {\n          return [buffer[offset], offset + 1];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, UINT_16, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 2)).buffer;\n          return [new Uint16Array(arrayBuffer)[0], offset + 2];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, UINT_32, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 4)).buffer;\n          return [new Uint32Array(arrayBuffer)[0], offset + 4];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, INT_8, function (buffer, offset) {\n          return [buffer[offset], offset + 1];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, INT_16, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 2)).buffer;\n          return [new Int16Array(arrayBuffer)[0], offset + 2];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, INT_32, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 4)).buffer;\n          return [new Int32Array(arrayBuffer)[0], offset + 4];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, FLOAT_32, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 4)).buffer;\n          return [new Float32Array(arrayBuffer)[0], offset + 4];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, FLOAT_64, function (buffer, offset) {\n          var arrayBuffer = new Uint8Array(buffer.slice(offset, offset + 8)).buffer;\n          return [new Float64Array(arrayBuffer)[0], offset + 8];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, FALSE, function () {\n          return [false, offset];\n        }), _defineProperty(_UINT_8$UINT_16$UINT_, TRUE, function () {\n          return [true, offset];\n        }), _UINT_8$UINT_16$UINT_)[info](buffer, offset);\n      }\n    }), _defineProperty(_this$types, STRING, {\n      twist: function twist(s) {\n        var arrayBuffer = Array.from(TextAPI.encode(s));\n        var l = [];\n        var mask = 0xff;\n        var len = arrayBuffer.length;\n\n        while (len) {\n          l.unshift(len & mask);\n          len >>= 8;\n        }\n\n        return [STRING | l.length].concat(l).concat(arrayBuffer);\n      },\n      untwist: function untwist(len, buffer, offset) {\n        var l = buffer.slice(offset, offset + len).reduce(function (l, byte) {\n          return l << 8 | byte;\n        }, 0);\n        var s = TextAPI.decode(new Uint8Array(buffer.slice(offset + len, offset + len + l)));\n        return [s, offset + len + l];\n      }\n    }), _defineProperty(_this$types, REGEXP, {\n      twist: function twist(r) {\n        var ret = _this.types[STRING].twist(r.toString());\n\n        ret[0] = REGEXP | ret[0] & GET_INFO;\n        return ret;\n      },\n      untwist: function untwist(len, buffer, offset) {\n        var ret = _this.types[STRING].untwist(len, buffer, offset);\n\n        ret[0] = new RegExp(ret[0].replace(/^\\/(.*)\\/g?i?m?u?y?$/, '$1'), ret[0].replace(/^\\/.*\\/(g?i?m?u?y?)$/, '$1'));\n        return ret;\n      }\n    }), _defineProperty(_this$types, OBJECT, {\n      twist: function twist(o) {\n        o = Object.entries(o);\n        var l = [];\n        var mask = 0xff;\n        var len = o.length;\n\n        while (len) {\n          l.unshift(len & mask);\n          len >>= 8;\n        }\n\n        return o.reduce(function (filament, _ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              key = _ref2[0],\n              value = _ref2[1];\n\n          key = _this.types[STRING].twist(key);\n          return filament.concat(key).concat(_this.twist(value));\n        }, [OBJECT | l.length].concat(l));\n      },\n      untwist: function untwist(len, buffer, offset) {\n        var l = buffer.slice(offset, offset + len).reduce(function (l, byte) {\n          return l << 8 | byte;\n        }, 0);\n        offset += len;\n        var obj = {};\n\n        while (l--) {\n          var _this$untwist = _this.untwist(buffer, offset),\n              _this$untwist2 = _slicedToArray(_this$untwist, 2),\n              key = _this$untwist2[0],\n              offs = _this$untwist2[1];\n\n          var _this$untwist3 = _this.untwist(buffer, offs),\n              _this$untwist4 = _slicedToArray(_this$untwist3, 2),\n              v = _this$untwist4[0],\n              o = _this$untwist4[1];\n\n          obj[key] = v;\n          offset = o;\n        }\n\n        return [obj, offset];\n      }\n    }), _defineProperty(_this$types, ARRAY, {\n      twist: function twist(a) {\n        a = Array.from(a);\n        var l = [];\n        var mask = 0xff;\n        var len = a.length;\n\n        while (len) {\n          l.unshift(len & mask);\n          len >>= 8;\n        }\n\n        return a.reduce(function (filament, el) {\n          return filament.concat(_this.twist(el));\n        }, [ARRAY | l.length].concat(l));\n      },\n      untwist: function untwist(len, buffer, offset) {\n        var l = buffer.slice(offset, offset + len).reduce(function (l, byte) {\n          return l << 8 | byte;\n        }, 0);\n        offset += len;\n        var arr = [];\n\n        while (l--) {\n          var _this$untwist5 = _this.untwist(buffer, offset),\n              _this$untwist6 = _slicedToArray(_this$untwist5, 2),\n              v = _this$untwist6[0],\n              o = _this$untwist6[1];\n\n          arr.push(v);\n          offset = o;\n        }\n\n        return [arr, offset];\n      }\n    }), _defineProperty(_this$types, BUFFER, {\n      twist: function twist(b) {\n        b = Array.from(b);\n        var l = [];\n        var mask = 0xff;\n        var len = b.length;\n\n        while (len) {\n          l.unshift(len & mask);\n          len >>= 8;\n        }\n\n        return [BUFFER | l.length].concat(l).concat(b);\n      },\n      untwist: function untwist(len, buffer, offset) {\n        var l = buffer.slice(offset, offset + len).reduce(function (l, byte) {\n          return l << 8 | byte;\n        }, 0);\n        var b = buffer.slice(offset + len, offset + len + l);\n        return [b, offset + len + l];\n      }\n    }), _this$types);\n  }\n\n  _createClass(BitFilament, [{\n    key: \"inspect\",\n    value: function inspect(arg) {\n      if (arg === null || typeof arg === 'undefined') return null;\n      if (typeof arg === 'string') return STRING;\n      if (typeof arg === 'number' || typeof arg === 'boolean') return NUMBER;\n      if (arg instanceof Uint8Array || typeof Buffer !== 'undefined' && arg instanceof Buffer) return BUFFER;\n      if (arg instanceof RegExp) return REGEXP;\n      if (arg instanceof Array || arg instanceof Uint16Array || arg instanceof Uint32Array || arg instanceof Int8Array || arg instanceof Int16Array || arg instanceof Int32Array || arg instanceof Float32Array || arg instanceof Float64Array) return ARRAY;\n      return OBJECT;\n    }\n  }, {\n    key: \"twist\",\n    value: function twist(arg) {\n      return this.types[this.inspect(arg)].twist(arg);\n    }\n  }, {\n    key: \"untwist\",\n    value: function untwist(buffer) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      if (buffer instanceof ArrayBuffer) buffer = new Uint8Array(buffer);else if (!(buffer instanceof Uint8Array)) buffer = Uint8Array.from(buffer);\n      var infoByte = buffer[offset];\n      var type = infoByte & GET_TYPE;\n      var info = infoByte & GET_INFO; // console.log({type, info, buffer})\n\n      return this.types[type].untwist(info, buffer, offset + 1);\n    }\n  }]);\n\n  return BitFilament;\n}();\n\nmodule.exports = BitFilament;","import React, { Component } from 'react'\nimport createECDH from 'create-ecdh'\nimport B64 from 'base64-arraybuffer'\n// import QR from 'qrcode.react'\n\nimport BitChaos from './lib/bit-chaos'\nimport rapi from './lib/rapi-lapi'\n\nimport logo from './logo-te-logo.png'\nimport './App.css';\n\n/* eslint-disable */\n\nconst isClient = typeof window !== 'undefined'\n\nconst PATH = typeof location !== 'undefined' ? location.pathname.slice(1) : ''\n\nconst LS = isClient ? (id, value = null) => {\n  console.log('LS', {id, value})\n  if(!value) {\n    if(typeof localStorage[id] === 'undefined') return null\n    try {\n      return JSON.parse(localStorage[id])\n    } catch (err) {\n      console.error(`Can not parse localStorage[${id}] as JSON:\\n${localStorage[id]},\\nerror:\\n`, err)\n    }\n  } else try {\n    value = JSON.stringify(value)\n    localStorage.setItem(id, value)\n    return value\n  } catch (err) {\n    console.error('Can not convert to JSON value', value, '\\nerror:\\n', err)\n  }\n  return null\n} : () => {}\n\nconst lapi = (server, getState, setState) => ({\n  init: (...args) => console.log('init:', ...args),\n  message: (...args) => console.log('init:', ...args),\n})\n\nclass App extends Component {\n\n  constructor({ path }) {\n\n    super()\n\n    path = path || PATH\n\n    this.ecdh = createECDH('secp521r1')\n\n    this.bc = new BitChaos('')\n\n    this.state = {\n      key: '',\n      secret: '',\n      peerMessage: '',\n      message: ''\n    }\n\n  }\n\n  componentDidMount () {\n\n    if(isClient){\n\n      this.setupKeys()\n\n      const url = `wss://cloud.mem.chat:${0xC0DE}`\n      let socket = null\n\n      try {\n\n        socket = new WebSocket(url)\n\n        socket.addEventListener('open', () => {\n          rapi({\n            lapi,\n            socket,\n            ecdh: this.ecdh,\n            getState: this.getState,\n            setState: state => this.setState(state)\n          })\n          .then(server => {\n            this.server = server\n            console.log({ server, id: this.id })\n            this.setState({ connected: true })\n            server.init()\n          })\n        })\n\n      } catch (e) {\n        console.warn(`Connection to ${url}: awaiting mem cloud connection...`)\n      }\n    }\n\n  }\n\n  getState () {\n    return this.state\n  }\n\n  setupKeys (privateKey = null) {\n    if(privateKey) {\n      this.ecdh.setPrivateKey(privateKey)\n      this.setState({key: this.ecdh.getPublicKey()})\n      this.privateKey = privateKey\n    } else {\n      if(LS) privateKey = LS('privateKey');\n      if(privateKey) return this.setupKeys(privateKey);\n      this.setState({key: this.ecdh.generateKeys()})\n      this.privateKey = this.ecdh.getPrivateKey()\n    }\n    if(LS) LS('privateKey', this.privateKey)\n  }\n\n  onPeerPublicChange({value = null}) {\n    if(!value) return;\n    try {\n      let secret = this.ecdh.computeSecret(new Uint8Array(B64.decode(value)))\n      this.setState({ secret })\n      this.bc = new BitChaos(secret)\n    } catch (e) { console.warn('wrong peer public:', value, B64.decode(value), e) }\n  }\n\n  onPeerMessageChange({value = null}) {\n    if(!value) return;\n    try {\n      this.setState({\n        peerMessage: this.bc.decrypt(new Uint8Array(B64.decode(value)))\n      })\n    } catch (e) { console.warn('wrong peer message:', value, e) }\n  }\n\n  onMessageChange({value = null}) {\n    if(!value) return;\n    try {\n      this.setState({\n        message: B64.encode(this.bc.encrypt(value))\n      })\n    } catch (e) { console.warn('wrong message:', value, e) }\n  }\n\n  copy({value = null}) {\n    if(!value) return;\n    console.log({navigator})\n    // navigator.clipboard.writeText(value).then(console.log, console.error);\n\n\n\n    // console.log({value})\n    // this.copyArea.value = value\n    // console.log('this.copyArea.value', this.copyArea.value)\n    // this.copyArea.focus()\n    // this.copyArea.select()\n    // document.execCommand('copy');\n  }\n\n  render() {\n\n\n    const { key, secret, peerMessage, message } = this.state\n\n    const publicKey = B64.encode(key)\n    console.log({key, secret, publicKey})\n\n    return (\n      <div className=\"App\">\n\n        <header className=\"App-header\">\n          <span>MEM Project</span>\n          <span><img src={logo} className=\"App-logo\" alt=\"logo\" /></span>\n          <span>relative-chaos</span>\n        </header>\n        <h4>end-to-end content encryptyon lab</ h4>\n\n        <div className=\"App-ui\">\n\n          <div className=\"h-box\">\n            <span><textarea className='key-field' placeholder=\"Открытый ключ собеседника\" onChange={({target = null}) => target && this.onPeerPublicChange(target)}/></span>\n            <div className='key-field' title=\"Скопировать в буфер\">{publicKey}</div>\n          </div>\n\n          <div className=\"h-box\">\n            <span><textarea placeholder=\"Шифрованный текст собеседника\" onChange={({target = null}) => target && this.onPeerMessageChange(target)}/></span>\n            <span><textarea placeholder=\"Ваше сообщение собеседнику\" onChange={({target = null}) => target && this.onMessageChange(target)}/></span>\n          </div>\n\n          <div className=\"h-box\">\n            <span><textarea onClick={({target = null}) => target && this.copy(target)} title=\"Скопировать в буфер\" placeholder=\"Расшифрованный текст собеседника\" readOnly value={peerMessage}/></span>\n            <span><textarea onClick={({target = null}) => target && this.copy(target)} title=\"Скопировать в буфер\" placeholder=\"Шифрованное сообщение собеседнику\" readOnly value={message}/></span>\n          </div>\n\n        </div>\n\n        <h5>2018 © MEM COST Technologies</h5>\n        <div className=\"footer\">\n          <div className=\"top-2\"><h3>{`Want to be owner of You id\\`s?`}</h3></div>\n          <div className=\"top-2\">{`Contribute ( Self Security Hand Book comming soon. Please `}<a className=\"mail-link\" href=\"https://github.com/relative-chaos\">{`follow on gihub`}</a>{` )`}</div>\n          <div className=\"top-2\">{`Or `}<a className=\"mail-link\" href=\"https://money.yandex.ru/to/41001821124082\">{`Donate`}</a>{`, if you understand, what we do:`}</div>\n          <div className=\"flex top-2\">\n            <div className=\"key\">\n              <p>ETH</p>\n              <p className=\"wallet\">0xd0b9e1735ea2c1e2afec712089afc8fcad8906e0</p>\n            </div>\n            <div className=\"key left-2\">\n              <p>BTC</p>\n              <p className=\"wallet\">16ghju2oHehczLCcCjRszbYqMrpXpp1pnS</p>\n            </div>\n            <div className=\"key\">\n              <p>DOGE</p>\n              <p className=\"wallet\">DCiTowGc2dLLRwY1sEhEBzZ4ZniJL1Hvbn</p>\n            </div>\n            <div className=\"key left-2\">\n              <p>LTC</p>\n              <p className=\"wallet\">LNLcMkQD8jogMtfvjCFaMucyXoECUDn8pL</p>\n            </div>\n          </div>\n          <div className=\"flex top-2\">\n            <div className=\"key\">\n              <p>XMR</p>\n              <p className=\"wallet\">4BrL51JCc9NGQ71kWhnYoDRffsDZy7m1HUU7MRU4nUMXAHNFBEJhkTZV9HdaL4gfuNBxLPc3BeMkLGaPbF5vWtANQoshL4x66PkQf8usv5</p>\n            </div>\n            <div className=\"key left-2\">\n              <p>ZEC</p>\n              <p className=\"wallet\">t1LJnH6QFP59PL1UokvZ3YtyoJs6B9yQEiR</p>\n            </div>\n            <div className=\"key\">\n              <p>BCH</p>\n              <p className=\"wallet\">qzu0j3n5x48d338ngfgvv2h6frltjaxvcsw6347sr7</p>\n            </div>\n            <div className=\"key left-2\">\n              <p>WAVES</p>\n              <p className=\"wallet\">3PHcweuuz8mBZUKC6mNX4VNGhkPNX8a7jux</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n/*\n\n\nconst bgFrame = typeof location === 'undefined' ? false : /^\\/https?:\\/\\//.test(location.pathname)\n\n        <div {...{ className: css.appView }}>\n          { bgFrame && <iframe {...{\n            src: `http://evm.mem.chat:${0xBA5E}${typeof location === undefined ? '/' : location.pathname}`,\n            sandbox: \"allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts\",\n            allow: \"geolocation; microphone; camera; midi; vr\",\n            allowtransparency: \"true\",\n            allowpaymentrequest: \"true\",\n            allowFullScreen: \"true\",\n            className: css.resultIframe\n          }} /> }\n        </div>\n\n */\n\n\n\n        // <div className=\"top-2\"><span>{`Ask: `}</span><a className=\"mail-link\" href=\"mailto:support@mem.chat\">{`support@mem.chat`}</a><span className=\"comment\">{`// please encrypt your question for support using this key:`}</span></div>\n        // <div className=\"comment left-4 width-60 top-1\">{`BAC1cV8+02UTO0H2I3tiQif9JtcQ5SeZC9hcih8qPe60XTE6SngGA5wsKrrgszJeRAo9nQ1PhFxAGxHCC4WpedZKOQBvjGFQteLZfglpVPYDiZKr1mXwjy2xh4PRdfxwVdrFkmW2olkApopXCliFP67KEO5HdZKp56OYV53PTrj6nOx9wQ==`}</div>\n        // <textarea className='copy-area' ref={ref => this.copyArea = ref} onChange={e => e} value=''/>\n\n\n// https://money.yandex.ru/to/410018135995820\n\nexport default App;\n\n\n/*\n\nрассмотрим две логические операции: ИЛИ ( | ) и И ( & ) для классических битовых переменных ( двух однобитовых регистра процессора ) X и Y с записью результата в регистр R\nоперация ИЛИ ( X | Y = \"R\" )\n0 | 0 = 0\n0 | 1 = 1\n1 | 0 = 1\n1 | 1 = 1\nоперация И ( X & Y = \"R\" )\n0 & 0 = 0\n0 & 1 = 0\n1 & 0 = 0\n1 & 1 = 1\nРегистр R может быть представлен как результат операции над регистрами X и Y и так как мы можем совершать над регистрами разные операции, мы можем добавить в систему регистр OP, кодирующий саму операцию\nВиртуализация регистра R позволяет кодировать его значения набором значения трёх регистров, что делает значение этого регистра абстрактным и зависимым от интерпретации значений регистров X, OP, Y\nТак, мы можем установить, что регистр Y кодирует не второй операнд операции, а её результат. По сути мы просто меняем ролями регистры Y и R и теперь виртуализован у нас второй операнд, а результат задан условием\nпри таком способе задания значения виртуального регистра, он может принимать следующие состояния\n\nоперация ИЛИ ( X | \"Y\" = R )\nоднозначно 0\n0 | \"0\" = 0 => 010 = 0\nоднозначно 1\n0 | \"1\" = 1 => 011 = 1\nсуперпозиция состояний (и то и другое одновременно)\n1 | \"0\" = 1 => 111 = ?\n1 | \"1\" = 1 => 111 = ?\nневозможное состояние (ни то ни другое)\n1 | \"!\" = 0 => 110 = !\n\nоперация И ( X & \"Y\" = R )\nсуперпозиция состояний (и то и другое одновременно)\n0 & \"0\" = 0 => 000 = ?\n0 & \"1\" = 0 => 000 = ?\nневозможное состояние (ни то ни другое)\n0 & \"!\" = 1 => 001 = !\nоднозначно 0\n1 & \"0\" = 0 => 100 = 0\nоднозначно 1\n1 & \"1\" = 1 => 101 = 1\n\nТак можно закодировать тремя битами виртуальный кубит. Но можем пойти дальше и закодировать тремя кубитами, да потратив в сумме 9 бит на кодирование одного кубита, но полагаю оно того стоит ) При таком подходе, мы можем любую из составляющих опорного триплета содержать в состоянии суперпозиции, например бит операции и имитировать дальнее взаимодействие например путём синхронизации событий по таймеру для двух кубитов независимо от расстояния между ними. Это вроде и не является квантовой запутанностью в физическом смысле, но работает так же, что позволяет предположить, что явление квантовой запутанности возможно между виртуальными состояниями суперпозиции\n\nBнтересно, достаточно ли будет такого приближения, что бы запустить алгоритм Шора без навороченного квантового кампа ) ?\n\nкстати кейс как заюзать невозможное состояние (в матемактике аналог - это корень из -1 ): кубит операции с невозможным значением может кодировать операцию XOR - исключающее ИЛИ ( X ^ \"Y\" = R )\n\nоднозначно 0\n0 ^ \"0\" = 0\nоднозначно 1\n0 ^ \"1\" = 1\nоднозначно 1\n1 ^ \"0\" = 1\nоднозначно 0\n1 ^ \"1\" = 0\n\nв этом случае нет ни суперпозиции ни невозможного состояния и проц переходит в классический режим обычной бинарной логики\n\n\n\n\n-----------------------------------------\n\nMEM T-Comunity\n        мастера своего дела\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var _classCallCheck = require(\"/home/elser/node/projects/relative-chaos/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar isClient = typeof window !== 'undefined';\nvar TextAPI = isClient ? {\n  encode: function encode(text) {\n    return new TextEncoder().encode(text);\n  },\n  decode: function decode(data) {\n    return new TextDecoder().decode(Uint8Array.from(data));\n  }\n} : {\n  encode: function encode(text) {\n    return Buffer.from(text);\n  },\n  decode: function decode(data) {\n    return Buffer.from(data).toString('utf8');\n  }\n};\n\nmodule.exports = function BitChaos(secret) {\n  \"use strict\";\n\n  _classCallCheck(this, BitChaos);\n\n  if (typeof secret === 'string') secret = TextAPI.encode(secret);else if (secret instanceof ArrayBuffer) secret = new Uint8Array(secret);else if (!(secret instanceof Uint8Array)) secret = Uint8Array.from(secret);\n  secret = Uint8Array.from(secret).filter(function (byte) {\n    return !!byte;\n  });\n\n  function origin(chunk, length) {\n    var result = chunk;\n    length = length & 3;\n    var logic = {\n      add: function add(key) {\n        var ring = 255,\n            len = length;\n\n        while (--len) {\n          ring = ring << 8 | ring;\n        }\n\n        ;\n        result = result + key & ring;\n        return logic;\n      },\n      sub: function sub(key) {\n        var ring = 255,\n            len = length;\n\n        while (--len) {\n          ring = ring << 8 | ring;\n        }\n\n        ;\n        result = result >= key ? result - key : ring + 1 + result - key;\n        return logic;\n      },\n      xor: function xor(key) {\n        result = result ^ key;\n        return logic;\n      },\n      done: function done() {\n        return result;\n      }\n    };\n    return logic;\n  }\n\n  this.encrypt = function (message) {\n    var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'array';\n    var fns = ['add', 'sub', 'xor'];\n    if (typeof message === 'string') message = TextAPI.encode(message);else if (message instanceof ArrayBuffer) message = new Uint8Array(message);else if (!(message instanceof Uint8Array)) message = Uint8Array.from(message);\n    var data = Uint8Array.from(message);\n    var slen = secret.length;\n    var dlen = data.length;\n    var encrypted = [];\n    var mask = 192;\n    var sptr = 0;\n    var dptr = 0;\n\n    while (dptr < dlen) {\n      var len = 0;\n      var seq = secret[sptr++];\n      sptr = sptr >= slen ? sptr - slen : sptr;\n      var shift = 0;\n      var state = void 0,\n          chunk = void 0;\n\n      while (mask >> shift) {\n        var step = (seq & mask >> shift) >> 6 - shift;\n\n        if (step) {\n          if (!len) {\n            len = dlen - dptr < step ? dlen - dptr : step;\n            chunk = data.slice(dptr, dptr + len).reduce(function (value, byte) {\n              return value ? value << 8 | byte : byte;\n            }, 0);\n            state = origin(chunk, len);\n          }\n\n          var key = secret.slice(sptr, sptr + len).reduce(function (key, byte) {\n            return key ? key << 8 | byte : byte;\n          }, 0);\n          state = state[fns[step - 1]](key);\n          sptr += len;\n          sptr = sptr >= slen ? sptr - slen : sptr;\n        }\n\n        shift += 2;\n      } // console.log({state, chunk,dptr, dlen, sptr, slen, encrypted, message, data, secret, len, shift, seq})\n\n\n      var result = state.done();\n      var part = [];\n      var l = len;\n\n      while (l--) {\n        part.unshift(result & 255);\n        result >>= 8;\n      }\n\n      encrypted = encrypted.concat(part);\n      dptr += len;\n    }\n\n    if (mode === 'array') return encrypted;\n    if (mode === 'bytearray') return Uint8Array.from(encrypted);\n    return TextAPI.decode(encrypted);\n  };\n\n  this.decrypt = function (message) {\n    var mode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'text';\n    var fns = ['sub', 'add', 'xor'];\n    if (typeof message === 'string') message = TextAPI.encode(message);\n    if (message instanceof ArrayBuffer) message = new Uint8Array(message);else if (!(message instanceof Uint8Array)) message = Uint8Array.from(message);\n    var data = Uint8Array.from(message);\n    var slen = secret.length;\n    var dlen = data.length;\n    var decrypted = [];\n    var sptr = 0;\n    var dptr = 0;\n\n    while (dptr < dlen) {\n      var len = 0;\n      var seq = secret[sptr++];\n      sptr = sptr >= slen ? sptr - slen : sptr;\n      var state = void 0,\n          chunk = void 0;\n      var shift = 0;\n      var mask = 192;\n      var steps = [];\n\n      while (mask >> shift) {\n        var step = (seq & mask >> shift) >> 6 - shift;\n\n        if (step) {\n          if (!len) {\n            len = dlen - dptr < step ? dlen - dptr : step;\n            chunk = data.slice(dptr, dptr + len).reduce(function (value, byte) {\n              return value ? value << 8 | byte : byte;\n            }, 0);\n            state = origin(chunk, len);\n          }\n\n          var key = secret.slice(sptr, sptr + len).reduce(function (key, byte) {\n            return key ? key << 8 | byte : byte;\n          }, 0);\n          steps.unshift({\n            fn: fns[step - 1],\n            key: key\n          });\n          sptr += len;\n          sptr = sptr >= slen ? sptr - slen : sptr;\n        }\n\n        shift += 2;\n      }\n\n      var result = steps.reduce(function (state, _ref) {\n        var fn = _ref.fn,\n            key = _ref.key;\n        return state[fn](key);\n      }, state).done();\n      var part = [];\n      var l = len;\n\n      while (l--) {\n        part.unshift(result & 255);\n        result >>= 8;\n      }\n\n      decrypted = decrypted.concat(part);\n      dptr += len;\n    }\n\n    if (mode === 'array') return decrypted;\n    if (mode === 'bytearray') return Uint8Array.from(decrypted);\n    return TextAPI.decode(decrypted);\n  };\n};"],"sourceRoot":""}